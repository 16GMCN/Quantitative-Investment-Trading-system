# 交易系统作业：

## 一、交易系统设计练习一
### 1.	编写程序利用wind数据终端或者掘金SDK获取上海期货交易所黄金期货主力合约的日数据和5分钟数据，数据长度不低于两年。
### 2.	编写函数计算收益率序列的年化收益率、夏普比率、最大回撤率和最大回撤期，并同时绘制收益率的净值曲线图和回撤比例柱状图。可以分开编写多个函数也可以编入一个函数。

## 一、交易系统设计练习二
### 1.	编写Luxor系统的回测程序：
#### a)	用Fast=10，Slow=20对黄金期货主力合约的15分钟数据进行回测，初始资金为100万元，并按照表3.1统计Luxor系统的各项指标。
#### b)	考虑每次交易0.1%的手续费再次对a）进行回测，并按照表3.1统计Luxor系统的各项指标。
### 2.	利用1b）条件对Luxor系统进行Fast（1-20）和Slow（10-60）的参数优化并绘制net profit、maxdd、sharpe ratio的三维图，选取最佳Fast和Slow参数，并计算各项指标。
### 3.	假设每日交易2小时，时间窗间隔15分钟，对上面系统进行TimeFilter优化。要求按图3.8绘制不同时间点的netprofit，maxdd和sharperatio变化图，并指出最优的交易时间点，给出理由，最后按照所选参数计算系统TimeFilter优化后的各项指标。（注：假设计算仓位和建仓不需要消耗时间，Fast、Slow均为题2的结果，交易手续费0.1%。）
### 4.	在题3的基础上绘制MAE图，并按图3.13绘制不同止损比例下NetProfit/MaxDD的变化图，进而确定每次交易的StopLoss比例。
### 5.	在题4的基础上利用5分钟数据进行TrailingStop比例优化，按图3.15B绘制NetProfit/MaxDD变化图，进而确定每次交易的TrailingStop比例。
### 6.	在题5的基础上绘制MFE图，并按图3.17绘制不同止盈比例下NetProfit/MaxDD的变化图，进而确定每次交易的ProfitTarget比例。
### 7.	按表3.4统计题3-题6不同优化步骤后系统的主要指标。

## 一、交易系统设计练习三
### 1.	对该交易系统进行TimeScale分析。按10分钟、15分钟、30分钟、1小时、2小时和1天的频率分别绘制权益变化图并计算系统绩效指标，并仿照图4.3-图4.5绘制不同TimeScale下绩效指标SR，Annual Return，MaxDD和MaxDDD的变化图。
### 2.	根据以上分析结果，选择最佳参数下的交易系统，编写函数对其进行Monte Carlo模拟。要求编写1000次循环，记录每次结果对应的SR，Annual Return，MaxDD和MaxDDD，并绘制它们的直方图，利用正态分布拟合这4个指标的均值和方差。
### 3.	Anchored walk forward analysis。设置优化窗口长度从1年到1年半，每次增加1个月的交易数据，测试集为优化窗口结束后半年的交易数据，分别计算每个窗口长度下的最优系统参数，以及系统在对应测试集的绩效指标SR，Annual Return，MaxDD和MaxDDD，并制表进行对比。
### 4.	Rolling walk forward analysis。设置优化窗口长度为1年，Rolling的起点每次后移1个月，测试集为优化窗口后半年的交易数据，分别计算每个窗口长度下的最优系统参数，以及系统在对应测试集的绩效指标SR，Annual Return，MaxDD和MaxDDD，并制表进行对比。
### 5.	对比Anchored和Rolling walk forward analysis的差异，是否存在接近的参数？
### 6.	将优化窗口长度缩短为半年，最优系统参数和绩效指标会变好还是变差？

## 一、交易系统设计练习四
### 1.	在每次固定交易1手的情况下对优化过后的系统进行回测，绘制净值曲线图并计算各项指标。
### 2.	根据Larry Williams的方法计算上述Luxor策略150% Maximum drawdown MM的最佳初始资金，绘制净值曲线和每期持仓量图，并计算策略的各项指标。
### 3.	根据Ralph Vince的方法，计算固定最大风险金额比例为2%、5%、10%时最佳初始资金，并绘制对应系统的净值曲线和每期持仓量图，以及策略的各项指标。
### 4.	根据Ryan Jones的方法，计算权益增加1000、1万和10万时固定盈利额比例资金管理的系统净值曲线和每期持仓量图，以及策略的各项指标。

## 一、交易系统设计练习五
### 以下题目任选一题编程：
### 1.	按照附录1编写bollinger交易系统并进行优化，绘制最优参数下的净值曲线图。
### 2.	按照附录2编写triangle交易系统并进行优化，绘制最优参数下的净值曲线。
